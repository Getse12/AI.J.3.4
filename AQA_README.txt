# –ê–≤—Ç–æ—Ç–µ—Å—Ç—ã –¥–ª—è Flask AI Translator & Critic

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç –Ω–∞–±–æ—Ä –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤ –¥–ª—è –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞ —Å AI-–æ—Ü–µ–Ω–∫–æ–π.

## üìã –°–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–æ–≤

### 1. –¢–µ—Å—Ç –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ (test_translation_basic)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –ø–µ—Ä–µ–≤–æ–¥–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –í–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç "–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!"
3. –í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ "–ê–Ω–≥–ª–∏–π—Å–∫–∏–π"
4. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏"
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–µ—Ä–µ–≤–æ–¥ –æ—Ç–æ–±—Ä–∞–∑–∏–ª—Å—è
6. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–µ—Ä–µ–≤–æ–¥ —É—Å–ø–µ—à–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è
- –ù–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö
- –ö–Ω–æ–ø–∫–∞ "–û—Ü–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥" –∞–∫—Ç–∏–≤–Ω–∞

def test_translation_basic(client, mock_openai):
    """–¢–µ—Å—Ç: –£—Å–ø–µ—à–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞"""
    response = client.post('/', data={
        'source_text': '–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!',
        'target_language': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
        'action': 'translate'
    })
    
    assert response.status_code == 200
    assert '–ü–µ—Ä–µ–≤–æ–¥' in response.get_data(as_text=True)
    assert '–û—Ü–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥' in response.get_data(as_text=True)

### 2. –¢–µ—Å—Ç –æ—Ü–µ–Ω–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞ (test_judge_functionality)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É AI-–æ—Ü–µ–Ω–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å —É—Å–ø–µ—à–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ (–∫–∞–∫ –≤ —Ç–µ—Å—Ç–µ 1)
2. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–û—Ü–µ–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥"
3. –î–æ–∂–¥–∞—Ç—å—Å—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç judge-–º–æ–¥–µ–ª–∏
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –æ—Ü–µ–Ω–∫–∞ –æ—Ç–æ–±—Ä–∞–∑–∏–ª–∞—Å—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –æ—Ü–µ–Ω–∫–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ (—Ü–∏—Ñ—Ä–∞ –æ—Ç 1 –¥–æ 10)
- –ï—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –æ—Ü–µ–Ω–∫–∏
- –û—Ü–µ–Ω–∫–∞ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫

def test_judge_functionality(client, mock_openai):
    """–¢–µ—Å—Ç: AI –æ—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–µ—Ä–µ–≤–æ–¥–∞"""
    # 1. –°–Ω–∞—á–∞–ª–∞ –ø–µ—Ä–µ–≤–æ–¥–∏–º
    client.post('/', data={
        'source_text': '–ö–∞–∫ –¥–µ–ª–∞?',
        'target_language': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
        'action': 'translate'
    })
    
    # 2. –ó–∞—Ç–µ–º –æ—Ü–µ–Ω–∏–≤–∞–µ–º
    response = client.post('/', data={
        'source_text': '–ö–∞–∫ –¥–µ–ª–∞?',
        'target_language': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
        'translation_result': 'How are you?',
        'action': 'judge'
    })
    
    assert response.status_code == 200
    assert '–ë–∞–ª–ª—ã:' in response.get_data(as_text=True)
    assert '–û—Ç–∑—ã–≤:' in response.get_data(as_text=True)

### 3. –¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø—É—Å—Ç–æ–≥–æ –≤–≤–æ–¥–∞ (test_empty_input_validation)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è –≤–≤–æ–¥–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –û—Ç–∫—Ä—ã—Ç—å –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –û—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø—É—Å—Ç—ã–º
3. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏"
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü–æ—è–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞."
- –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫ –Ω–µ –ø—ã—Ç–∞–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∫ API
- –§–æ—Ä–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∞ —Ç–æ–π –∂–µ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

def test_empty_input_validation(client):
    """–¢–µ—Å—Ç: –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—É—Å—Ç–æ–≥–æ –ø–æ–ª—è"""
    response = client.post('/', data={
        'source_text': '',  # –ü–£–°–¢–û–ï –ü–û–õ–ï
        'target_language': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
        'action': 'translate'
    })
    
    assert response.status_code == 200
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
    assert '–≤–≤–µ–¥–∏—Ç–µ –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç' in response.get_data(as_text=True).lower()

### 4. –¢–µ—Å—Ç –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ (test_multiple_languages)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤ –ø–µ—Ä–µ–≤–æ–¥–∞
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ –∫–∞–∂–¥—ã–π –¥–æ—Å—Ç—É–ø–Ω—ã–π —è–∑—ã–∫:
   - –ê–Ω–≥–ª–∏–π—Å–∫–∏–π
   - –ò—Å–ø–∞–Ω—Å–∫–∏–π
   - –§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π
   - –ù–µ–º–µ—Ü–∫–∏–π
   - –ö–∏—Ç–∞–π—Å–∫–∏–π
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞:
   - –í–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç "–ö–∞–∫ –¥–µ–ª–∞?"
   - –í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫
   - –ù–∞–∂–∞—Ç—å "–ü–µ—Ä–µ–≤–µ—Å—Ç–∏"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —è–∑—ã–∫–∞ –ø–µ—Ä–µ–≤–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤—ã–±—Ä–∞–Ω–Ω—ã–π —è–∑—ã–∫ –≤ –ø—Ä–æ–º–ø—Ç
- –ù–µ—Ç –æ—à–∏–±–æ–∫ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π –∏–ª–∏ —è–∑—ã–∫–æ–º

import pytest

@pytest.mark.parametrize('language', [
    '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π', '–ò—Å–ø–∞–Ω—Å–∫–∏–π', '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π', 
    '–ù–µ–º–µ—Ü–∫–∏–π', '–ö–∏—Ç–∞–π—Å–∫–∏–π'
])
def test_multiple_languages(client, mock_openai, language):
    """–¢–µ—Å—Ç: –ü–µ—Ä–µ–≤–æ–¥ –Ω–∞ 5 —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–æ–≤"""
    response = client.post('/', data={
        'source_text': '–ö–∞–∫ –¥–µ–ª–∞?',
        'target_language': language,
        'action': 'translate'
    })
    
    assert response.status_code == 200
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫
    assert '–æ—à–∏–±–∫–∞' not in response.get_data(as_text=True).lower()

### 5. –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API (test_api_error_handling)
**–¶–µ–ª—å:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ API
**–°—Ü–µ–Ω–∞—Ä–∏–π:**
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å mock-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –æ—à–∏–±–æ–∫:
   - –û—à–∏–±–∫–∞ 500 (Internal Server Error)
   - –û—à–∏–±–∫–∞ 429 (Rate Limit)
   - –¢–∞–π–º–∞—É—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ—à–∏–±–∫–∏:
   - –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ü—Ä–∏ –æ—à–∏–±–∫–µ API –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –ø–∞–¥–∞–µ—Ç —Å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º
- Raw –æ—Ç–≤–µ—Ç –æ—Ç API —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
- –ö–Ω–æ–ø–∫–∏ –æ—Å—Ç–∞—é—Ç—Å—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏

def test_api_error_handling(client):
    """–¢–µ—Å—Ç: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ—Ç API"""
    # –ú–æ–∫–∞–µ–º —Å–±–æ–π API
    with patch('app.openai.ChatCompletion.create') as mock:
        mock.side_effect = Exception("API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω")
        
        response = client.post('/', data={
            'source_text': '–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç',
            'target_language': '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π',
            'action': 'translate'
        })
    
    assert response.status_code == 200
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ –æ—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    assert '–æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ' in response.get_data(as_text=True).lower()

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
- **pytest** - —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **Selenium** - –¥–ª—è UI —Ç–µ—Å—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- **requests** - –¥–ª—è API —Ç–µ—Å—Ç–æ–≤
- **unittest.mock** - –¥–ª—è –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
